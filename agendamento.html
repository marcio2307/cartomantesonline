<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agendamento de Tarot</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; }
body { font-family: Arial, sans-serif; background:#000; color:#fff; padding:20px; display:flex; justify-content:center; }
.container { background:#111; padding:20px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.5); width:100%; max-width:500px; }
h2 { text-align:center; color:red; margin-bottom:15px; }
label { margin-top:10px; display:block; font-weight:bold; color:yellow; }
input, select, button { width:100%; padding:10px; margin-bottom:15px; border-radius:6px; border:1px solid #ccc; font-size:16px; background:#222; color:#fff; }
button { background:red; color:#fff; border:none; cursor:pointer; transition:0.3s; }
button:hover { background:#b30000; }
.confirmation { display:none; text-align:center; color:#0cdfb9; font-size:18px; margin-top:10px; }
.aviso-final { margin-top:20px; color:yellow; font-size:14px; text-align:left; border-top:1px solid #333; padding-top:10px; line-height:1.6; }
</style>
</head>
<body>

<div class="container">
<h2>Agendamento de Tarot</h2>

<form id="tarotForm">
    <input type="hidden" name="access_key" value="6332c1be-705b-4f53-94b4-a38267e2cf2a">

    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome" required>

    <label for="whatsapp">Número de WhatsApp:</label>
    <input type="tel" id="whatsapp" name="whatsapp" placeholder="+55 (XX) XXXXX-XXXX" required>

    <label for="data">Data (Seg a Sáb):</label>
    <input type="date" id="data" name="data" required>

    <label for="hora">Horário:</label>
    <select id="hora" name="hora" required>
        <option value="">Selecione</option>
        <option value="20:30">20:30</option>
        <option value="21:30">21:30</option>
        <option value="22:00">22:00</option>
    </select>

    <label for="pacote">Pacote de Perguntas:</label>
    <select id="pacote" name="pacote" required>
        <option value="">Selecione</option>
        <option value="3 perguntas - R$60,00">3 perguntas - R$60,00</option>
        <option value="7 perguntas - R$120,00">7 perguntas - R$120,00</option>
    </select>

    <button type="submit">Enviar Agendamento</button>
</form>

<div class="confirmation" id="confirmationDiv">
    ✅ Seu agendamento foi enviado com sucesso!
</div>

<div class="aviso-final">
    ⚠️ <b>Observações:</b><br>
    • O atendimento é individual e confidencial.<br>
    • Em caso de imprevisto, reagende com antecedência.<br>
    • O horário será reservado apenas após a confirmação do pagamento.
</div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwl4s5pIqfKLd8H33jHkpM3XL56UnQGB-p7amWrah6x2AAs3KyTxEl-CFeOu_vuXnPNNw/exec";

const form = document.getElementById('tarotForm');
const confirmation = document.getElementById('confirmationDiv');

form.addEventListener('submit', e => {
  e.preventDefault();
  const data = new FormData(form);

  // Envia para a planilha Google
  fetch(scriptURL, { method: 'POST', body: data })
    .then(response => {
      // Envia também para o Web3Forms
      fetch("https://api.web3forms.com/submit", { method: "POST", body: data })
      .then(res => res.json())
      .then(dataWeb => {
        if (dataWeb.success) {
          confirmation.style.display = "block";
          form.reset();

          // Redireciona para o WhatsApp
          const numero = "5585984368057";
          const msg = "Já fiz meu agendamento de consulta e desejo realizar o pagamento.";
          window.open(`https://api.whatsapp.com/send?phone=${numero}&text=${encodeURIComponent(msg)}`, "_blank");
        } else {
          alert("Erro ao enviar via Web3Forms.");
        }
      });
    })
    .catch(error => alert("Erro ao registrar na planilha: " + error.message));
});
</script>
</body>
</html>

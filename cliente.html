-<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel do Cliente â€” Cartomantes Online</title>
  <style>
    :root{
      --roxo:#621770; --turq:#0cdfb9; --bg:#0f0a12; --card:#1a1220;
      --txt:#f7f5f9; --muted:#c9bfd4; --ok:#22c55e; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
      background:radial-gradient(1200px 600px at 80% -10%, rgba(98,23,112,0.22), transparent),
                 linear-gradient(180deg, #110915, #0b0710 60%, #09060c);
      color:var(--txt);
    }
    .wrap{max-width:960px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--roxo),#a64ccf);
      display:grid;place-items:center;color:#fff;font-weight:700;box-shadow:0 10px 30px rgba(98,23,112,.35)}
    .title h1{font-size:20px;margin:0}.title small{color:var(--muted)}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);
      border-radius:16px;padding:18px;box-shadow:0 10px 24px rgba(0,0,0,.28)}
    .grid{display:grid;gap:16px}@media(min-width:780px){.grid{grid-template-columns:1.2fr .8fr}}
    .saldo{display:flex;align-items:flex-end;gap:12px;flex-wrap:wrap}
    .saldo h2{margin:0;font-size:15px;color:var(--muted)}
    .valor{font-size:40px;font-weight:800;letter-spacing:-.5px;
      background:linear-gradient(180deg,#fff,#d8cbe2);-webkit-background-clip:text;color:transparent}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(12,223,185,.12);
      border:1px solid rgba(12,223,185,.35);color:#b8fff1}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:12px;padding:12px 16px;font-weight:700;
      background:linear-gradient(135deg,var(--roxo),#a64ccf);color:white;box-shadow:0 8px 22px rgba(98,23,112,.35);
      transition:transform .08s ease,filter .2s ease}
    .btn:hover{transform:translateY(-1px)}.btn:active{transform:translateY(0)}
    .btn.outline{background:transparent;color:#e9d9f2;border:1px solid rgba(255,255,255,.16)}
    .btn.ghost{background:transparent;color:#d5f8f0;border:1px dashed rgba(12,223,185,.35)}
    .note{font-size:13px;color:var(--muted)}
    .list{margin:0;padding:0;list-style:none}
    .tx{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
    .tx:last-child{border-bottom:0}.tx .amt{font-weight:700}.ok{color:var(--ok)}.warn{color:var(--warn)}
    footer{margin-top:24px;text-align:center;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">ðŸ”®</div>
        <div class="title">
          <h1>Painel do Cliente</h1>
          <small>Cartomantes Online</small>
        </div>
      </div>
      <div class="chip" id="statusChip">Status: <strong>Conectado</strong></div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="saldo">
          <div>
            <h2>Seu saldo disponÃ­vel</h2>
            <div class="valor" id="saldoView">R$ 0,00</div>
          </div>
          <span class="badge" id="lastCreditBadge">sem crÃ©ditos</span>
        </div>

        <div class="row" style="margin-top:16px">
          <a class="btn" target="_blank" 
             href="https://cartomantespagamento.com.br/index.php?valor=10,00&descricao=MINUTOS%20ODARA">
             Adicionar R$ 10,00 (PIX)
          </a>
          <button class="btn outline" id="btnDetectar">Detectar pagamento</button>
          <button class="btn ghost" id="btnLimpar">Zerar saldo</button>
        </div>

        <p class="note" style="margin-top:10px">
          Assim que o pagamento for aprovado, vocÃª serÃ¡ redirecionado automaticamente a este painel e seu saldo serÃ¡ atualizado.
        </p>
      </section>

      <aside class="card">
        <h3 style="margin-top:0">MovimentaÃ§Ãµes</h3>
        <ul class="list" id="listaTx"></ul>
      </aside>
    </div>

    <footer>Â© <span id="year"></span> Cartomantes Online â€” Seu atendimento mÃ­stico</footer>
  </div>

  <script>
    const fmt = new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'});
    const toNumberBR=v=>Number(v.replace(',','.'))||0;
    const saldoView=document.getElementById('saldoView');
    const lastCreditBadge=document.getElementById('lastCreditBadge');
    const listaTx=document.getElementById('listaTx');
    const STORAGE_SALDO='co_saldo';const STORAGE_TX='co_tx';

    const getSaldo=()=>Number(localStorage.getItem(STORAGE_SALDO)||0);
    const setSaldo=n=>localStorage.setItem(STORAGE_SALDO,n);
    const getTx=()=>JSON.parse(localStorage.getItem(STORAGE_TX)||'[]');
    const setTx=a=>localStorage.setItem(STORAGE_TX,JSON.stringify(a));

    function render(){
      saldoView.textContent=fmt.format(getSaldo());
      const tx=getTx();listaTx.innerHTML='';
      if(!tx.length){listaTx.innerHTML='<li class="tx"><span>Nenhuma movimentaÃ§Ã£o</span><span class="amt">â€”</span></li>';return;}
      tx.slice().reverse().forEach(t=>{
        const when=new Date(t.ts).toLocaleString('pt-BR',{timeZone:'America/Fortaleza'});
        listaTx.innerHTML+=`<li class="tx"><div><strong>${t.desc}</strong><br><small class="ok">${when}</small></div><div class="amt">+ ${fmt.format(t.valor)}</div></li>`;
      });
      lastCreditBadge.textContent=`Ãšltimo crÃ©dito: ${fmt.format(tx[tx.length-1].valor)}`;
    }

    function addCredito(valor,desc='CrÃ©dito'){
      const novo=getSaldo()+valor;setSaldo(novo);
      const tx=getTx();tx.push({valor,desc,ts:Date.now()});setTx(tx);
      render();alert('ðŸ’° CrÃ©dito recebido: '+fmt.format(valor));
    }

    function detectFromURL(){
      const url=new URL(location.href);
      const status=(url.searchParams.get('status')||'').toLowerCase();
      const valor=url.searchParams.get('valor');const desc=url.searchParams.get('descricao')||'CrÃ©dito';
      if(status==='paid'&&valor){addCredito(toNumberBR(valor),desc);
        url.search='';history.replaceState({},'',url);}
    }

    document.getElementById('btnDetectar').onclick=detectFromURL;
    document.getElementById('btnLimpar').onclick=()=>{localStorage.clear();render();};
    document.getElementById('year').textContent=new Date().getFullYear();

    render();detectFromURL();
  </script>
</body>
</html>
